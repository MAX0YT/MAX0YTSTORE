import{initializeApp as L}from"https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";import{getDatabase as N,ref as Y,get as Z,child as _}from"https://www.gstatic.com/firebasejs/12.2.1/firebase-database.js";import{getAuth as Q,createUserWithEmailAndPassword as z,signInWithEmailAndPassword as F,signOut as G,onAuthStateChanged as H,updateProfile as D}from"https://www.gstatic.com/firebasejs/12.2.1/firebase-auth.js";var R={apiKey:"AIzaSyCUltMwgKS1GOH5sL46f5l0Z9oi6qI2aTI",authDomain:"max0ytst.firebaseapp.com",databaseURL:"https://max0ytst-default-rtdb.firebaseio.com",projectId:"max0ytst",storageBucket:"max0ytst.firebasestorage.app",messagingSenderId:"896428844125",appId:"1:896428844125:web:7a7bed5bfe578785ff59b4",measurementId:"G-G0RDKQBW80"},J=L(R),U=N(J),x=Q(J);class K{constructor(){this.currentUser=null,this.init()}init(){H(x,(k)=>{if(this.currentUser=k,this.updateUI(),k&&window.location.pathname.includes("Authorization.html"))window.location.href="/index.html"})}async login(k,q){try{return{success:!0,user:(await F(x,k,q)).user}}catch(y){return{success:!1,error:y.message}}}async logout(){try{return await G(x),window.location.href="/index.html",{success:!0}}catch(k){return{success:!1,error:k.message}}}updateUI(){let k=document.querySelector('a[href="/HTML/Authorization.html"]');if(this.currentUser){if(k)k.innerHTML=`
                    <button type="button" class="hover:text-viol text-yell bg-viol hover:bg-yell focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center">
                        ${this.currentUser.email}
                    </button>
                `,k.href="/HTML/Profile.html",this.addLogoutButton()}}addLogoutButton(){if(document.getElementById("logout-btn"))return;let k=document.getElementById("loginDiv");if(k){let q=document.createElement("button");q.id="logout-btn",q.className="ml-2 hover:text-viol text-yell bg-red-600 hover:bg-red-700 font-medium rounded-lg text-sm px-4 py-2 text-center ml-2",q.textContent="Выйти",q.onclick=()=>this.logout(),k.appendChild(q)}}}var O=new K;export{O as authManager,K as AuthManager};
